<!doctype html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <title>SpeedAuto</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
    
<div id="chatbot-container">
  <div id="chatbot-header">
    ðŸ¤– Chat SpeedAuto
    <button id="chatbot-toggle">âˆ’</button>
  </div>

  <div id="chatbot-panel">
    <div id="chatbot-messages"></div>
    <div id="chatbot-input">
      <input type="text" id="chatbot-text" placeholder="Digite sua pergunta...">
      <button id="chatbot-send">Enviar</button>
    </div>
  </div>
</div>

<style>
#chatbot-container {
  position: fixed;
  bottom: 15px;
  right: 20px;
  width: 320px;
  background: #000000;
  color: #fff;
  border-radius: 12px;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
  overflow: hidden;
  font-family: 'Segoe UI', sans-serif;
  z-index: 9999;
  transition: all 0.3s ease-in-out;
}


#chatbot-header {
  background: #090a4e;
  padding: 10px 12px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-weight: bold;
  cursor: pointer;
}

#chatbot-header button {
  background: transparent;
  color: #fff;
  border: none;
  font-size: 18px;
  cursor: pointer;
}


#chatbot-panel {
  display: flex;
  flex-direction: column;
  height: 360px;
  transition: all 0.3s ease-in-out;
}

#chatbot-messages {
  flex: 1;
  padding: 10px;
  overflow-y: auto;
  font-size: 14px;
}

#chatbot-input {
  display: flex;
  padding: 8px;
  background: #2c2c2c;
}

#chatbot-input input {
  flex: 1;
  border: none;
  border-radius: 8px;
  background: #3b3b3b;
  color: white;
  padding: 8px;
  outline: none;
}

#chatbot-input button {
  margin-left: 8px;
  background: #646cffaa;
  border: none;
  color: rgb(255, 255, 255);
  padding: 8px 10px;
  border-radius: 8px;
  cursor: pointer;
}


#chatbot-container.minimized {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: #090a4e;
  box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
}

#chatbot-container.minimized #chatbot-header,
#chatbot-container.minimized #chatbot-panel {
  display: none;
}

#chatbot-container.minimized::after {
  content: "ðŸ¤–";
  font-size: 26px;
}
</style>

<script>
const chatbotSend = document.getElementById("chatbot-send");
const chatbotText = document.getElementById("chatbot-text");
const chatbotMessages = document.getElementById("chatbot-messages");
const chatbotToggle = document.getElementById("chatbot-toggle");
const chatbotContainer = document.getElementById("chatbot-container");


window.addEventListener("DOMContentLoaded", () => {
  chatbotContainer.classList.add("minimized");
  chatbotToggle.textContent = "+";
});


chatbotSend.addEventListener("click", sendMessage);
chatbotText.addEventListener("keypress", (e) => {
  if (e.key === "Enter") sendMessage();
});

async function sendMessage() {
  const mensagem = chatbotText.value.trim();
  if (!mensagem) return;

  chatbotMessages.innerHTML += `<div><b>VocÃª:</b> ${mensagem}</div>`;
  chatbotText.value = "";

  const res = await fetch("/chatbot", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ mensagem })
  });

  const data = await res.json();
  chatbotMessages.innerHTML += `<div><b>SpeedAuto:</b> ${data.resposta}</div>`;
  chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
}


chatbotContainer.addEventListener("click", (e) => {
  if (chatbotContainer.classList.contains("minimized")) {
    chatbotContainer.classList.remove("minimized");
    chatbotToggle.textContent = "âˆ’";
  }
});


chatbotToggle.addEventListener("click", (e) => {
  e.stopPropagation(); 
  chatbotContainer.classList.add("minimized");
  chatbotToggle.textContent = "+";
});
</script>



  </body>
</html>